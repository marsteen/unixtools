#************************************************************
#
#  makefile for GNU C++
#
#************************************************************

#************************************************************
#
# CC: name of C++ compiler
#
#************************************************************

CC = g++


#************************************************************
#
# Test if MingGW32 (Windows)
#
#************************************************************

ifeq ($(MSYSTEM), MINGW32)
BINEXT = .exe
endif

#************************************************************
#
# library and include path names
#
#************************************************************

#
LIBBASE    = ../lib
INCPATH    = ../include

#************************************************************
#
# c++ source files
#
#************************************************************

CCFILES  = main.cpp

#************************************************************
#
# library files
#
#************************************************************

LINKLIBS    = 

#************************************************************
#
# C++ flags
#
# -c  = compile only
# -O2 = optimize level 2
# -s  = remove symboltables
#
#************************************************************

CCFLAGS  = -O2 -I$(INCPATH)

#************************************************************
#
# Rule for making .o-file from .cpp-file
#
# $@ = Name of the target (.o)
# $< = Name of dependency (.cpp)
#
#************************************************************

.cpp.o:
	$(CC) -c $(CCFLAGS) -o$@ $<

#************************************************************
#
# List of object-files
#
#************************************************************

CCOBJECTS  = $(CCFILES:.cpp=.o)

#************************************************************
#
# Name of target
#
#************************************************************

TARGET  = addnewline$(BINEXT)

#************************************************************
#
# Rule for default-target
#
#************************************************************

default: $(TARGET)

#************************************************************
#
# Rule for clean-up
#
#************************************************************

clean:
	rm *.o
	rm ../lib/*.o

#************************************************************
#
# Rule for creating target from objects
#
#************************************************************

$(TARGET): $(CCOBJECTS) makefile
	$(CC) -o $(TARGET) $(CCFLAGS) $(CCOBJECTS)
	strip $(TARGET)

